!function(n,t){module&&module.exports?module.exports=t():define&&define.amd?define(t):n.Class=t()}(this,function(){"use strict";function n(){}function t(n){return c(this,n)}function r(t,r){var o=arguments;switch(o.length){case 0:throw new Error("Illegal arguments");case 1:r=h(o[0])?{}:t;break;default:d(r)&&(r.name=t)}if(r){var i=r.name;if(!E.test(i))throw new Error("Invalid class name: "+i)}return e(n,r)}function e(r,o){function u(n){return y(o[n])}1===arguments.length&&(y(r)?o={}:(o=r,r=n));var h=o.init,d=o.statics,w=o.pythonic="boolean"==typeof o.pythonic?o.pythonic:S.pythonic,b=o.name||"Class$"+A.toString(16);y(h)?w&&(h=l(h)):h=g;var j=$(o);j=j.filter(function(n){return!x[n]});var E=r.prototype,P=function(n,t){_[n]||(_[n]=new Function("init","return function "+n+"(){return init.apply(this, arguments);}"));return _[n](t)}(b,h),z=P.prototype=O(E);return a(z,{constructor:P,clazz:P,uber:E,$callSuper:function(n){var t=E[n];if(!y(t))throw new Error;var r=arguments[1];return v(r)||(r=p(arguments,1)),t.apply(this,r)}}),a(P,{superclass:r,isAssignableFrom:t,$classdef:function(n,t){return Object.assign({},t.$classdef,n)}(o,r),extend:e.bind(P,P),decorate:i.bind(P,P)}),z.$super=function(n){var t=arguments;if(v(n)&&(t=w?p(n,1):n),c(P,Array))this.push.apply(this,t);else{var r=E;if(r&&r.$super){var e=r.$super;this.$super=function(){return e.apply(this,arguments)},r.clazz.apply(this,t),this.$super=e}}},function(n,t,r){t||(t={});f(t,r),f(n,t)}(P,d,r),w&&(j.filter(u).forEach(function(n){z[n]=l(o[n])}),j=j.filter(m.not(u))),s(o,z,j),A++,P}function o(n){function t(n){return n===Object.prototype?[]:Object.keys(n).concat(t(Object.getPrototypeOf(n)))}var r={};return t(n).filter(m.and(function(n){return!r[n]&&(r[n]=!0,!0)},function(n){return"$super"!==n}))}function i(t,r){function e(n,t){function r(n,t){if(y(n))return function(){return n.call(this,t,arguments)};var r=n.before||function(){return arguments},e=n.after||g,o=n.throws||function(n){throw n},i=n.returns||function(n){return n};return function(){var n,u=r.apply(this,arguments)||arguments;try{n=t.apply(this,u),n=i.call(this,n)}catch(n){o.call(this,n)}return e.call(this,n),n}}var e=t["*"];for(var i in t)if("*"!==i){var u=t[i],c=n[i];if(!y(c))throw new Error("You must decorate on a function");n[i]=r(u,c)}return e&&o(n).filter(function(r){return!t[r]&&y(n[r])}).forEach(function(t){n[t]=r(e,n[t])}),n}if(!t)throw new Error("cannot decorate on null or undefined");if(!r)throw new Error("decorators is undefined");return w(t)?function(t,r){var o=n.extend(t,{});return o.prototype=e(O(o.prototype),r),o}(t,r):e(t,r)}function u(n,t){function r(r){function o(){return t.call(e,n,r,arguments)}return o.toString=function(){return r.toString()},o}var e=O(n);return o(n).reduce(function(t,e){var o=n[e];return y(o)&&(t[e]=r(o)),t},e)}function c(n,t){return!(!t||!n)&&(n===t||n.superclass===t||O(n.prototype)instanceof t)}function f(n,t){return Object.setPrototypeOf?Object.setPrototypeOf(n,t):{__proto__:[]}instanceof Array?n.__proto__=t:s(t,n,$(t)),n}function a(n,t){for(var r in t)!function(n,t,r){b(n,t,{value:r,enumerable:!1,configurable:!1,writable:!1})}(n,r,t[r])}function s(n,t,r,e){y(e)&&(r=r.filter(function(r){return e(n,t,r)})),r.forEach(function(r){!function(n,t,r){var e=Object.getOwnPropertyDescriptor(n,r);d(e)&&b(t,r,e)}(n,t,r)})}function l(n){var t=function(){var t=this,r=[t].concat(function(n){return p(n,0)}(arguments));return n.apply(t,r)};return t.toString=function(){return n.toString()},t.valueOf=function(){return n},t}function p(n,t){return Array.prototype.slice.call(n,t)}function h(n){return"string"==typeof n}function y(n){return"function"==typeof n}function d(n){return void 0!==n&&null!==n}function v(n){return n&&"[object Arguments]"===n.toString()}function w(t){return y(t)&&c(t,n)}function g(){}var m={not:function(n){return function(t){return!n(t)}},or:function(n,t){return function(r){return n(r)||t(r)}},and:function(n,t){return function(r){return n(r)&&t(r)}}},b=Object.defineProperty,$=Object.getOwnPropertyNames,O=Object.create,j=Object.assign,E=/^[a-z\$_][\w\$]*$/i,x={init:!0,statics:!0,pythonic:!0,name:!0};n.create=r,n.extend=e,n.mix=function(t){return new function(t){this.with=function(){return Array.prototype.reduce.call(arguments,function(t,r){return function(t,r){var e=function(t,r){var e=t.$classdef.pythonic;return n.extend(t,{name:r,pythonic:e,init:e?function(){t.apply(this,p(arguments,1))}:function(){t.apply(this,arguments)}})}(r,r.name+"$"+t.name);return n.extend(t,e.$classdef)}(t,r)},t)}}(t)},n.singleton=function(n,t){var o;switch(arguments.length){case 0:throw new Error("Illegal arguments");case 1:o=r(n);break;default:if(h(n))o=r(n,t);else{if(!y(n))throw new Error("Illegal arguments");o=e(n,t)}}return new o},n.isAssignableFrom=t,n.proxy=function(n,t){if(!n)throw new Error("cannot proxy null or undefined object");if(!y(t))throw new Error("handler is not function");return w(n)?function(n,t){return n.extend({name:n.name,pythonic:n.$classdef.pythonic,init:function(){return this.$super(arguments),u(this,t)}})}(n,t):u(n,t)},n.members=o,n.decorate=i,n.configure=function(t){return j(t||{}),n};var _={},A=0,S={pythonic:!0};return n});