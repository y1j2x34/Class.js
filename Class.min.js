!function(t,n){module&&module.exports?module.exports=n():define&&define.amd?define(n):t.Class=n()}(this,function(){"use strict";function t(){}function n(t){return a(this,t)}function r(n,r){var o=arguments;switch(o.length){case 0:throw new Error("Illegal arguments");case 1:r=y(o[0])?{}:n;break;default:w(r)&&(r.name=n)}if(r){var i=r.name;if(!x.test(i))throw new Error("Invalid class name: "+i)}return e(t,r)}function e(r,o){function u(t){return v(o[t])}1===arguments.length&&(v(r)?o={}:(o=r,r=t));var c=o.init,y=o.statics,w=o.pythonic="boolean"==typeof o.pythonic?o.pythonic:A.pythonic,g=o.name||"Class$"+z.toString(16);v(c)||(c=f),w&&(c=h(c));var $=O(o);$=$.filter(function(t){return!_[t]});var x=r.prototype,P=function(t,n){S[t]||(S[t]=new Function("init","return function "+t+"(){return init.apply(this, arguments);}"));return S[t](n)}(g,c),I=P.prototype=E(x);return l(I,{constructor:P,clazz:P,uber:x,$callSuper:function(t){var n=x[t];if(!v(n))throw new Error;var r=arguments[1];return b(r)||(r=d(arguments,1)),n.apply(this,r)}}),l(P,{superclass:r,isAssignableFrom:n,$classdef:function(t,n){return j({},n.$classdef,t)}(o,r),extend:e.bind(P,P),decorate:i.bind(P,P)}),I.$super=function(t){var n=arguments;if(b(t)&&(n=w?d(t,1):t),a(P,Array))this.push.apply(this,n);else{var r=x;if(r&&r.$super){var e=r.$super;this.$super=function(){return e.apply(this,arguments)},r.clazz.apply(this,n),this.$super=e}}},function(t,n,r){n||(n={});s(n,r),s(t,n)}(P,y,r),w&&($.filter(u).forEach(function(t){I[t]=h(o[t])}),$=$.filter(m.not(u))),p(o,I,$),z++,P}function o(t){function n(t){return t===Object.prototype?[]:Object.keys(t).concat(n(Object.getPrototypeOf(t)))}var r={};return n(t).filter(m.and(function(t){return!r[t]&&(r[t]=!0,!0)},function(t){return"$super"!==t}))}function i(n,r){function e(t,n){var r=n["*"];delete n["*"];for(var e in n){var i=n[e],c=t[e];if(!v(c))throw new Error("You must decorate on a function");t[e]=u(i,c)}return r&&o(t).filter(function(r){return!n[r]&&v(t[r])}).forEach(function(n){t[n]=u(r,t[n])}),t}if(!n)throw new Error("cannot decorate on null or undefined");if(!r)throw new Error("decorators is undefined");if(!function(t){return"object"==typeof t}(r))throw new Error("Illegal argument: decorators");return g(n)?function(n,r){delete r.clazz,delete r.uber,delete r.$callSuper;var o;if(function(t){return!v(t.constructor)||-1!==O(t).indexOf("constructor")}(r)){var i=r.constructor;if(delete r.constructor,delete i.returns,n.$classdef.pythonic){var c=i.before;v(c)&&(i.before=function(){var t=c.apply(this,d(arguments,1));return t&&t.unshift(this),t})}o=u(i,f,!0)}var a=t.extend(n,{init:o});return a.prototype=e(E(a.prototype),r),a}(n,r):e(n,r)}function u(t,n,r){if(v(t))return function(){return t.call(this,n,arguments)};var e=t.before||function(){return arguments},o=t.after||function(){},i=t.thrown||function(t){throw t},u=t.returns||function(t){return t};return function(){var t,c=e.apply(this,arguments)||arguments;try{t=n.apply(this,c),t=u.call(this,t)}catch(t){i.call(this,t)}return r?(o.call(this,this),this):(o.call(this,t),t)}}function c(t,n){function r(r){function o(){return n.call(e,t,r,arguments)}return o.toString=function(){return r.toString()},o}var e=E(t);return o(t).reduce(function(n,e){var o=t[e];return v(o)&&(n[e]=r(o)),n},e)}function f(){this.$super(arguments)}function a(t,n){return!(!n||!t)&&(t===n||t.superclass===n||E(t.prototype)instanceof n)}function s(t,n){return Object.setPrototypeOf?Object.setPrototypeOf(t,n):{__proto__:[]}instanceof Array?t.__proto__=n:p(n,t,O(n)),t}function l(t,n){for(var r in n)!function(t,n,r){$(t,n,{value:r,enumerable:!1,configurable:!1,writable:!1})}(t,r,n[r])}function p(t,n,r){r.forEach(function(r){!function(t,n,r){var e=Object.getOwnPropertyDescriptor(t,r);w(e)&&$(n,r,e)}(t,n,r)})}function h(t){var n=function(){var n=this,r=[n].concat(function(t){return d(t,0)}(arguments));return t.apply(n,r)};return n.toString=function(){return t.toString()},n.valueOf=function(){return t},n}function d(t,n){return Array.prototype.slice.call(t,n)}function y(t){return"string"==typeof t}function v(t){return"function"==typeof t}function w(t){return void 0!==t&&null!==t}function b(t){return t&&"[object Arguments]"===t.toString()}function g(n){return v(n)&&a(n,t)}var m={not:function(t){return function(n){return!t(n)}},and:function(t,n){return function(r){return t(r)&&n(r)}}},$=Object.defineProperty,O=Object.getOwnPropertyNames,E=Object.create,j=Object.assign,x=/^[a-z\$_][\w\$]*$/i,_={init:!0,statics:!0,pythonic:!0,name:!0};t.create=r,t.extend=e,t.mix=function(n){return new function(n){this.with=function(){return Array.prototype.reduce.call(arguments,function(n,r){return function(n,r){var e=function(n,r){var e=n.$classdef.pythonic;return t.extend(n,{name:r,pythonic:e,init:e?function(){n.apply(this,d(arguments,1))}:function(){n.apply(this,arguments)}})}(r,r.name+"$"+n.name);return t.extend(n,e.$classdef)}(n,r)},n)}}(n)},t.singleton=function(t,n){var o;switch(arguments.length){case 0:throw new Error("Illegal arguments");case 1:o=r(t);break;default:if(y(t))o=r(t,n);else{if(!v(t))throw new Error("Illegal arguments");o=e(t,n)}}return new o},t.isAssignableFrom=n,t.proxy=function(t,n){if(!t)throw new Error("object is required");if(!v(n))throw new Error("handler is not a function");return g(t)?function(t,n){return t.extend({name:t.name,pythonic:t.$classdef.pythonic,init:function(){return this.$super(arguments),c(this,n)}})}(t,n):c(t,n)},t.members=o,t.decorate=i,t.configure=function(n){return j(n||{}),t};var S={},z=0,A={pythonic:!0};return t});