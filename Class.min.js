!function(n,t){module&&module.exports?module.exports=t():define&&define.amd?define(t):n.Class=t()}(this,function(){"use strict";function n(){}function t(n){return i(this,n)}function r(t,r){var o=arguments;switch(o.length){case 0:throw new Error("Illegal arguments");case 1:r=h(o[0])?{}:t;break;default:v(r)&&(r.name=t)}if(r){var i=r.name;if(!b.test(i))throw new Error("Invalid class name: "+i)}return e(n,r)}function e(r,o){function h(){}1===arguments.length&&(y(r)?o={}:(o=r,r=n));var v=o.init,w=o.statics,b=!1!==o.pythonic,x=o.name||"Class$"+j.toString(16);y(v)?b&&(v=l(v)):v=d;var _=m(o);_=_.filter(function(n){return!O[n]});var A=h.prototype=r.prototype,E=function(n,t){$[n]||($[n]=new Function("init","return function "+n+"(){return init.apply(this, arguments);}"));return $[n](t)}(x,v),S=E.prototype=new h;return c(S,{constructor:E,clazz:E,uber:A,$callSuper:function(n){var t=A[n];if(!(t instanceof Function))throw new Error;var r=arguments[1];return g(r)||(r=p(arguments,1)),t.apply(this,r)}}),c(E,{superclass:r,isAssignableFrom:t,$classdef:function(n,t){return Object.assign({},t.$classdef,n)}(o,r),extend:function(n){return e.call(E,E,n)}}),S.$super=function(n){var t=arguments;if(g(n)&&(t=b?p(n,1):n),i(E,Array))this.push.apply(this,t);else{var r=A;if(r&&r.$super){var e=r.$super;this.$super=function(){return e.apply(this,arguments)},r.clazz.apply(this,t),this.$super=e}}},function(n,t,r){t||(t={});u(t,r),u(n,t)}(E,w,r),b?a(o,_,function(n,t){var r=n[t];y(r)?S[t]=l(r):s(n,S,t)}):f(o,S,_,function(n,t,r){return y(n[r])}),j++,E}function o(n){function t(n){return n===Object.prototype?[]:Object.keys(n).concat(t(Object.getPrototypeOf(n)))}var r={};return t(n).filter(function(n){return!r[n]&&(r[n]=!0,!0)}).filter(function(n){return"$super"!==n})}function i(n,t){return!(!t||!n)&&(n===t||n.superclass===t||Object.create(n.prototype)instanceof t)}function u(n,t){return Object.setPrototypeOf?Object.setPrototypeOf(n,t):{__proto__:[]}instanceof Array?n.__proto__=t:f(t,n,m(t)),n}function c(n,t){for(var r in t)!function(n,t,r){w(n,t,{value:r,enumerable:!1,configurable:!1,writable:!1})}(n,r,t[r])}function a(n,t,r){y(r)||(r=d),h(t)&&r(n,t);for(var e=0;e<t.length;e++)r(n,t[e])}function f(n,t,r,e){y(e)||(e=function(){return!0}),a(n,r,function(n,r){e(n,t,r)&&s(n,t,r)})}function s(n,t,r){var e=Object.getOwnPropertyDescriptor(n,r);v(e)&&w(t,r,e)}function l(n){var t=function(){var t=this,r=[t].concat(function(n){return p(n,0)}(arguments));return n.apply(t,r)};return t.toString=function(){return n.toString()},t.valueOf=function(){return n},t}function p(n,t){return Array.prototype.slice.call(n,t)}function h(n){return"string"==typeof n}function y(n){return"function"==typeof n}function v(n){return void 0!==n&&null!==n}function g(n){return n&&"[object Arguments]"===n.toString()}function d(){}var w=Object.defineProperty,m=Object.getOwnPropertyNames,b=/^[a-z\$_][\w\$]*$/i,O={init:!0,statics:!0,pythonic:!0,name:!0};n.create=r,n.extend=e,n.mix=function(t){return new function(t){this.with=function(){return Array.prototype.reduce.call(arguments,function(t,r){return function(t,r){var e=function(t,r){var e=!1!==t.$classdef.pythonic;return n.extend(t,{name:r,pythonic:e,init:e?function(){t.apply(this,p(arguments,1))}:function(){t.apply(this,arguments)}})}(r,r.name+"$"+t.name);return n.extend(t,e.$classdef)}(t,r)},t)}}(t)},n.singleton=function(n,t){var o;switch(arguments.length){case 0:throw new Error("Illegal arguments");case 1:o=r(n);break;default:if(h(n))o=r(n,t);else{if(!y(n))throw new Error("Illegal arguments");o=e(n,t)}}return new o},n.isAssignableFrom=t,n.proxy=function(n,t){if(!n)throw new Error("cannot proxy null or undefined object");if(!(t instanceof Function))throw new Error("handler is not function");var r=Object.create(n);return o(n).reduce(function(r,e){var o=n[e];return o instanceof Function&&(r[e]=function(r){function e(){return t.call(n,r,arguments)}return e.toString=function(){return r.toString()},e}(o)),r},r)},n.members=o;var $={},j=0;return n});